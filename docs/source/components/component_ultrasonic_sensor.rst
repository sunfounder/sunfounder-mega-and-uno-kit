超声波模块
================================

.. image:: img/ultrasonic_pic.png
    :width: 400
    :align: center


超声波传感器模块是一种使用超声波测量与物体之间距离的仪器。它有两个探头。一种是发送超声波，另一种是接收超声波并将发送和接收的时间转换为距离，从而检测设备与障碍物之间的距离。在实践中，它非常方便和实用。

提供2cm-400cm非接触测量功能，测距精度可达3mm。可保证5m内信号稳定，5m后信号逐渐减弱，直至7m位置消失。

该模块包括超声波发射器、接收器和控制电路。基本原则如下：

* 使用IO触发器处理至少10us的高电平信号。
* 模块自动发送8个40khz并检测是否有脉冲信号返回。
* 如果信号返回，通过高电平，则高输出IO持续时间就是超声波从发射到返回的时间。这里，测试距离 =（高时间 x 声速（340 m / s）/ 2。

时序图如下所示：

.. image:: img/ultrasonic228.png

你只需要为触发输入提供一个 10us 的短脉冲即可开始测距，然后模块会以 40 kHz 的频率发出 8 个周期的超声波脉冲并提高其回波。你可以通过发送触发信号和接收回波信号之间的时间间隔来计算距离。

公式：us / 58 = 厘米或 us / 148 = 英寸；或：范围=高电平时间*速度（340M/S）/2；为防止触发信号与回波信号发生信号冲突，建议使用60ms 以上的测量周期。

**示例**

* :ref:`ultrasonic_mega` (Mega板项目)
* :ref:`ultrasonic_uno` （R3板项目）
* :ref:`16. 游戏 - 愤怒的鹦鹉` (Scratch项目)


